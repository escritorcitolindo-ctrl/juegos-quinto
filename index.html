<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Learning - Organization Skills</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root { --primary: #58cc02; --secondary: #1cb0f6; --text: #4b4b4b; --bg: #f7f7f7; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); color: var(--text); display: flex; flex-direction: column; align-items: center; min-height: 100vh; margin: 0; }
        #app { width: 90%; max-width: 500px; padding: 20px; text-align: center; }
        .card-ui { background: white; border-radius: 20px; padding: 25px; border: 2px solid #e5e5e5; box-shadow: 0 8px 0 #e5e5e5; }
        .hidden { display: none !important; }
        
        /* Botones Estilo Duolingo */
        button { background: var(--primary); color: white; border: none; padding: 15px 25px; border-radius: 12px; font-weight: bold; cursor: pointer; box-shadow: 0 4px 0 #46a302; font-size: 1.1em; transition: 0.1s; margin: 10px; }
        button:active { transform: translateY(4px); box-shadow: none; }
        input { padding: 12px; border-radius: 10px; border: 2px solid #ccc; width: 80%; margin-bottom: 10px; font-size: 1em; }

        /* Flashcard Animada */
        .scene { width: 280px; height: 350px; margin: 20px auto; perspective: 600px; }
        .flashcard { width: 100%; height: 100%; position: relative; transition: transform 0.6s; transform-style: preserve-3d; cursor: pointer; }
        .flashcard.is-flipped { transform: rotateY(180deg); }
        .face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 20px; border: 3px solid #e5e5e5; padding: 15px; box-sizing: border-box; background: white; }
        .back { transform: rotateY(180deg); background: var(--secondary); color: white; }
        .img-box { width: 150px; height: 150px; background: #eee; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 80px; margin-bottom: 20px; }
        
        .option-btn { background: white; color: var(--text); border: 2px solid #e5e5e5; box-shadow: 0 4px 0 #e5e5e5; width: 100%; }
        .option-btn:hover { background: #f0f0f0; }
    </style>
</head>
<body>

<div id="app">
    <div id="screen-login" class="card-ui">
        <h1>Â¡Hola! ğŸ‘‹</h1>
        <p>Aprende inglÃ©s de forma divertida.</p>
        <input type="text" id="username" placeholder="Escribe tu nombre aquÃ­...">
        <br>
        <button onclick="iniciar()">EMPEZAR JUEGO</button>
    </div>

    <div id="screen-flash" class="hidden">
        <h3 id="progress">1 / 41</h3>
        <div class="scene">
            <div class="flashcard" id="card" onclick="voltear()">
                <div class="face front">
                    <div class="img-box" id="card-icon">ğŸ“š</div>
                    <h2 id="card-en">Word</h2>
                </div>
                <div class="face back">
                    <h2 id="card-es">Palabra</h2>
                </div>
            </div>
        </div>
        <p>Haz click en la carta para ver la traducciÃ³n</p>
        <button id="btn-aprendido" class="hidden" onclick="irAlQuiz()">Â¡APRENDIDO!</button>
    </div>

    <div id="screen-quiz" class="hidden">
        <h2 id="quiz-title">PrÃ¡ctica</h2>
        <div id="quiz-area" class="card-ui">
            </div>
    </div>

    <div id="screen-over" class="hidden card-ui">
        <h1>ğŸ‰ Â¡GAME OVER! ğŸ‰</h1>
        <h3>Â¡Lo lograste, <span id="player-name"></span>!</h3>
        <hr>
        <h4>RÃ©cord de Jugadores:</h4>
        <div id="leaderboard" style="text-align: left;"></div>
        <button onclick="location.reload()">VOLVER A JUGAR</button>
    </div>
</div>

<script>
    const data = [
        { en: "How to get organized", es: "CÃ³mo organizarse", icon: "ğŸ“…" },
        { en: "15 minutes early", es: "15 minutos temprano", icon: "â°" },
        { en: "Rushing to be on time", es: "Apurado para llegar a tiempo", icon: "ğŸƒ" },
        { en: "Very stressful", es: "Muy estresante", icon: "ğŸ˜«" },
        { en: "If one little thing goes wrong", es: "Si una pequeÃ±a cosa sale mal", icon: "âš ï¸" },
        { en: "Your efforts are futile", es: "Tus esfuerzos son inÃºtiles", icon: "ğŸš«" },
        { en: "Give yourself a break", es: "Date un respiro", icon: "ğŸ§˜" },
        { en: "A 15-minute head start", es: "Una ventaja de 15 minutos", icon: "â³" },
        { en: "Itâ€™s easier to make time than to get back lost time", es: "Es mÃ¡s fÃ¡cil hacerse tiempo que recuperar el tiempo perdido", icon: "âŒ›" },
        { en: "Prepare your things the night before", es: "Prepara tus cosas la noche anterior", icon: "ğŸŒ™" },
        { en: "Get your clothes ready", es: "Prepara tu ropa", icon: "ğŸ‘•" },
        { en: "Pack your backpack", es: "Empaca tu mochila", icon: "ğŸ’" },
        { en: "Set out the box of cereal", es: "Saca la caja de cereal", icon: "ğŸ¥£" },
        { en: "Set the breakfast table", es: "Pon la mesa del desayuno", icon: "ğŸ½ï¸" },
        { en: "Your mornings will go very smoothly", es: "Tus maÃ±anas transcurrirÃ¡n sin problemas", icon: "âœ¨" },
        { en: "Youâ€™ll have a more positive start", es: "TendrÃ¡s un comienzo mÃ¡s positivo", icon: "â˜€ï¸" },
        { en: "Use a day planner", es: "Usa una agenda", icon: "ğŸ“”" },
        { en: "Write down things you have to do", es: "Anota las cosas que tienes que hacer", icon: "ğŸ“" },
        { en: "Use alerts to help you remember things", es: "Usa alertas para ayudarte a recordar", icon: "ğŸ””" },
        { en: "Flag your most important priorities", es: "Marca tus prioridades mÃ¡s importantes", icon: "ğŸš©" },
        { en: "You have a test due on a certain day", es: "Tienes un examen en un dÃ­a determinado", icon: "âœï¸" },
        { en: "Make a space in your room", es: "Crea un espacio en tu habitaciÃ³n", icon: "ğŸ " },
        { en: "An unused corner of the living room", es: "Un rincÃ³n libre de la sala", icon: "ğŸ›‹ï¸" },
        { en: "Put a desk light there", es: "Pon una lÃ¡mpara de escritorio allÃ­", icon: "ğŸ’¡" },
        { en: "Make it your place to do your homework", es: "Hazlo tu lugar para hacer la tarea", icon: "ğŸ’»" },
        { en: "You will train yourself to concentrate", icon: "ğŸ§ ", es: "Te entrenarÃ¡s para concentrarte" },
        { en: "When you are sitting there", es: "Cuando estÃ©s sentado allÃ­", icon: "ğŸª‘" },
        { en: "Your family will leave you alone to study", es: "Tu familia te dejarÃ¡ solo para estudiar", icon: "ğŸ”•" },
        { en: "Wake up at 6 am", es: "DespiÃ©rtate a las 6 am", icon: "ğŸŒ…" },
        { en: "Get dressed", es: "VÃ­stete", icon: "ğŸ‘Ÿ" },
        { en: "Take a shower", es: "TÃ³mate una ducha", icon: "ğŸš¿" },
        { en: "Have breakfast", es: "Desayuna", icon: "ğŸ³" },
        { en: "Have lunch", es: "Almuerza", icon: "ğŸ¥ª" },
        { en: "Have dinner", es: "Cena", icon: "ğŸ²" },
        { en: "Brush my teeth", es: "LÃ¡vate los dientes", icon: "ğŸª¥" },
        { en: "Go to school", es: "Ve a la escuela", icon: "ğŸ«" },
        { en: "Get to school", es: "Llega a la escuela", icon: "ğŸšŒ" },
        { en: "Watch TV", es: "Mira televisiÃ³n", icon: "ğŸ“º" },
        { en: "Go to bed at 10 pm", es: "Ve a la cama a las 10 pm", icon: "ğŸ˜´" },
        { en: "Do my homework", es: "Haz mi tarea", icon: "âœï¸" },
        { en: "Do exercise", es: "Haz ejercicio", icon: "ğŸ’ª" }
    ];

    let index = 0;
    let nombre = "";
    const card = document.getElementById('card');

    function hablar(texto, idioma = 'en-US') {
        const p = new SpeechSynthesisUtterance(texto);
        p.lang = idioma;
        p.rate = 0.9;
        window.speechSynthesis.speak(p);
    }

    function iniciar() {
        nombre = document.getElementById('username').value.trim();
        if(!nombre) { alert("Â¡Dime tu nombre!"); return; }
        
        // Guardar en registro
        let historico = JSON.parse(localStorage.getItem('jugadores') || "[]");
        historico.push(nombre);
        localStorage.setItem('jugadores', JSON.stringify(historico));

        document.getElementById('screen-login').classList.add('hidden');
        document.getElementById('screen-flash').classList.remove('hidden');
        mostrarCard();
    }

    function mostrarCard() {
        const item = data[index];
        document.getElementById('progress').innerText = `${index + 1} / ${data.length}`;
        document.getElementById('card-en').innerText = item.en;
        document.getElementById('card-es').innerText = item.es;
        document.getElementById('card-icon').innerText = item.icon;
        card.classList.remove('is-flipped');
        document.getElementById('btn-aprendido').classList.add('hidden');
        hablar(item.en);
    }

    function voltear() {
        card.classList.toggle('is-flipped');
        if(card.classList.contains('is-flipped')) {
            hablar(data[index].es, 'es-MX');
            document.getElementById('btn-aprendido').classList.remove('hidden');
        } else {
            hablar(data[index].en);
        }
    }

    function irAlQuiz() {
        document.getElementById('screen-flash').classList.add('hidden');
        document.getElementById('screen-quiz').classList.remove('hidden');
        
        const modo = Math.floor(Math.random() * 4);
        const area = document.getElementById('quiz-area');
        const item = data[index];
        area.innerHTML = "";

        if(modo === 0) { // Listening
            document.getElementById('quiz-title').innerText = "ğŸ§ Listen & Choose";
            area.innerHTML = `<button onclick="reproducir()">ğŸ”Š Play Sound</button>`;
            window.reproducir = () => hablar(item.en);
            generarOpciones(item.en, false);
            hablar(item.en);
        } else if(modo === 1) { // Writing
            document.getElementById('quiz-title').innerText = "âœï¸ Write in English";
            area.innerHTML = `<h3>"${item.es}"</h3>
                <input type="text" id="ans" placeholder="Type here...">
                <button onclick="validarEscritura()">CHECK</button>`;
        } else if(modo === 2) { // Speaking
            document.getElementById('quiz-title').innerText = "ğŸ—£ï¸ Speaking Mode";
            area.innerHTML = `<h2 style="color:var(--secondary)">${item.en}</h2>
                <button style="background:orange" onclick="alert('MicrÃ³fono activado...')">ğŸ¤ SPEAK NOW</button>
                <button onclick="feedback(true)">I'M DONE</button>`;
        } else { // Reading
            document.getElementById('quiz-title').innerText = "ğŸ“– Reading Time";
            area.innerHTML = `<h2 style="color:var(--primary)">${item.en}</h2>`;
            generarOpciones(item.es, true);
        }
    }

    function generarOpciones(correcta, esEspanol) {
        let opts = [correcta];
        while(opts.length < 3) {
            let r = data[Math.floor(Math.random()*data.length)];
            let pick = esEspanol ? r.es : r.en;
            if(!opts.includes(pick)) opts.push(pick);
        }
        opts.sort(() => Math.random() - 0.5);
        opts.forEach(o => {
            let b = document.createElement('button');
            b.className = "option-btn";
            b.innerText = o;
            b.onclick = () => feedback(o === correcta);
            document.getElementById('quiz-area').appendChild(b);
        });
    }

    function validarEscritura() {
        let user = document.getElementById('ans').value.toLowerCase().trim().replace(/[^\w\s]/gi, '');
        let real = data[index].en.toLowerCase().trim().replace(/[^\w\s]/gi, '');
        feedback(user === real);
    }

    function feedback(esCorrecto) {
        if(esCorrecto) {
            confetti({ particleCount: 150 });
            hablar(Math.random() > 0.5 ? "Great job" : "Good work");
            setTimeout(() => {
                index++;
                document.getElementById('screen-quiz').classList.add('hidden');
                if(index < data.length) {
                    document.getElementById('screen-flash').classList.remove('hidden');
                    mostrarCard();
                } else {
                    document.getElementById('screen-over').classList.remove('hidden');
                    document.getElementById('player-name').innerText = nombre;
                    let lista = JSON.parse(localStorage.getItem('jugadores') || "[]");
                    document.getElementById('leaderboard').innerHTML = lista.map(l => `â€¢ ${l}<br>`).join('');
                }
            }, 1000);
        } else {
            hablar("Almost perfect");
        }
    }
</script>
</body>
</html>
